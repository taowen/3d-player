---
alwaysApply: true
---

# 3D Player

## æ–‡ä»¶ç»“æ„
```
src/
â”œâ”€â”€ mkv_stream_reader.h       # MKVæµè¯»å–å™¨å¤´æ–‡ä»¶
â”œâ”€â”€ mkv_stream_reader.cpp     # MKVæµè¯»å–å™¨å®ç°
â”œâ”€â”€ hw_video_decoder.h        # ç¡¬ä»¶è§†é¢‘è§£ç å™¨å¤´æ–‡ä»¶
â””â”€â”€ hw_video_decoder.cpp      # ç¡¬ä»¶è§†é¢‘è§£ç å™¨å®ç°
tests/
â”œâ”€â”€ test_mkv_stream_reader.cpp # MKVæµè¯»å–å™¨æµ‹è¯•
â””â”€â”€ test_hw_video_decoder.cpp  # ç¡¬ä»¶è§†é¢‘è§£ç å™¨æµ‹è¯•
test_data/
â””â”€â”€ sample_hw.mkv             # æµ‹è¯•æ–‡ä»¶
build.ps1                     # PowerShellæ„å»ºè„šæœ¬
```

## æ ¸å¿ƒAPI

### MKVStreamReader
```cpp
class MKVStreamReader {
public:
    bool open(const std::string& filepath);
    StreamInfo getStreamInfo() const;
    bool readNextPacket(AVPacket* packet);
    bool isVideoPacket(const AVPacket* packet) const;
    bool isAudioPacket(const AVPacket* packet) const;
    bool isOpen() const;
    bool isEOF() const;
    AVCodecParameters* getVideoCodecParameters() const;
    AVCodecParameters* getAudioCodecParameters() const;
    void close();
};
```

### HwVideoDecoder
```cpp
class HwVideoDecoder {
public:
    struct DecodedFrame {
        AVFrame* frame;
        bool is_valid;
    };
    
    bool open(const std::string& filepath);
    bool readNextFrame(DecodedFrame& frame);
    bool isOpen() const;
    bool isEOF() const;
    void close();
    
    MKVStreamReader* getStreamReader() const;
};
```

## æ„å»ºæµ‹è¯•

æˆ‘ä»¬ä½¿ç”¨ git bash çš„ terminalï¼Œè¦æ³¨æ„ powershell è„šæœ¬çš„æ‰§è¡Œæ–¹å¼

### Git Bash ç¯å¢ƒ
```bash
powershell -ExecutionPolicy Bypass -File ./build.ps1 test  # æ„å»ºå¹¶è¿è¡Œæµ‹è¯•
```

## ä½¿ç”¨ç¤ºä¾‹

### MKVStreamReader ä½¿ç”¨
```cpp
MKVStreamReader reader;
if (reader.open("video.mkv")) {
    AVPacket* packet = av_packet_alloc();
    while (reader.readNextPacket(packet)) {
        if (reader.isVideoPacket(packet)) {
            // å¤„ç†è§†é¢‘åŒ…
        } else if (reader.isAudioPacket(packet)) {
            // å¤„ç†éŸ³é¢‘åŒ…
        }
        av_packet_unref(packet);
    }
    av_packet_free(&packet);
    reader.close();
}
```

### HwVideoDecoder ä½¿ç”¨
```cpp
HwVideoDecoder decoder;
if (decoder.open("video.mkv")) {
    HwVideoDecoder::DecodedFrame frame;
    while (decoder.readNextFrame(frame)) {
        if (frame.is_valid) {
            // å¤„ç†è§£ç åçš„å¸§
        }
    }
    decoder.close();
}
```

---

## ğŸ”§ ç»´æŠ¤æŒ‡å—

**âš ï¸ é‡è¦ï¼šæ¯æ¬¡ä¿®æ”¹ä»£ç åéƒ½è¦æ›´æ–° README.md**

### éœ€è¦æ›´æ–°çš„å†…å®¹ï¼š
1. **æ–‡ä»¶ç»“æ„** - æ·»åŠ /åˆ é™¤æ–‡ä»¶æ—¶æ›´æ–°
2. **æ ¸å¿ƒAPI** - ä¿®æ”¹å…¬å…±æ¥å£æ—¶æ›´æ–°
3. **æ„å»ºæµ‹è¯•** - æ”¹å˜æ„å»ºæ–¹å¼æ—¶æ›´æ–°

### ä¸èƒ½æ›´æ–°çš„å†…å®¹

ä¸è¦æ›´æ–°â€œç»´æŠ¤æŒ‡å—â€è¿™ä¸ªç« èŠ‚

### æ›´æ–°åŸåˆ™ï¼š
- ä¿æŒç®€æ´ï¼Œåªè®°å½•ä¸å¿«é€Ÿä¸Šæ‰‹æ”¹ä»£ç ç›¸å…³çš„å¿…è¦æ ¸å¿ƒä¿¡æ¯
- åŠæ—¶æ›´æ–° README.mdï¼Œé¿å…æ–‡æ¡£è¿‡æ—¶
